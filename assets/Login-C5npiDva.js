import{l as Z,n as _,r,j as e,H as $,C as J,L}from"./vendor-LjbCKWXj.js";import{A as Q}from"./index-CUf8Fghe.js";import{C as X}from"./CustomReCAPTCHA-TudvVxJY.js";import{S as Y}from"./SuccessFullScreen-Bq3ZACd6.js";import{u as ee,a as te,b as m}from"./index-CTm2M2qR.js";import{P as re}from"./PasswordInput-BBQbj07p.js";import{S as T}from"./images-BpZCWdsu.js";import"./successAnimation-C1ByJTMN.js";function me({...n}){const{authToken:l,authUser:f,setContractorProfile:p,setProviderProfile:y,connectedWithGoogle:x,errorConnectWithGoogle:v,authenticate:j,logout:H}=ee(),{dispatch:E}=te(),i=Z(),q=_(),w=new URLSearchParams(q.search).get("token"),[R,c]=r.useState(!1),[h,A]=r.useState(""),[b,N]=r.useState(""),[g,o]=r.useState(!1),[k,s]=r.useState(!0),[P,C]=r.useState(!1),[G,S]=r.useState(""),u=r.useRef(null),[U,B]=r.useState(!1),F="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",I=t=>{t.preventDefault(),P?O():(c(!0),s(!0),setTimeout(async()=>{const d={email:h,password:b},a=await j(n.requestOrigin,"Server","User",d,n.requestOrigin==="Chatbot"?w:void 0);a.success?(o(!0),S(a.message)):(E({type:"SHOW_ALERT",payload:{type:"error",text:a.message}}),K(),c(!1),s(!1))},3e3))},O=async()=>{c(!0),s(!0),await j(n.requestOrigin,"Google","User",void 0,n.requestOrigin==="Chatbot"?w:void 0)},W=()=>{g&&setTimeout(async()=>{var t;if((t=u.current)==null||t.resetReCAPTCHA(),l&&f){const d=await m.currentUserHaveContractorProfile(l),a=await m.currentUserHaveProviderProfile(l);d?(p(!0),i("/contratante/inicio")):a?(y(!0),i("/freelancer/inicio")):i("/perfil")}o(!1)},4200)},D=()=>{P&&(o(!0),S("Conectado(a) com Google"),C(!1),setTimeout(async()=>{var t;if((t=u.current)==null||t.resetReCAPTCHA(),l&&f){const d=await m.currentUserHaveContractorProfile(l),a=await m.currentUserHaveProviderProfile(l);d?(p(!0),i("/contratante/inicio")):a?(y(!0),i("/freelancer/inicio")):i("/perfil")}o(!1)},4200))},M=()=>{var t;return!(!m.verifyEmail(h)||!z()||!((t=u.current)!=null&&t.reCAPTCHAFilled))},z=()=>b.length!==0,V=t=>{B(t)},K=()=>{var t;A(""),N(""),(t=u.current)==null||t.resetReCAPTCHA()};return r.useEffect(()=>{o(!1),s(!0),H()},[]),r.useEffect(()=>{s(!M())},[h,b,U]),r.useEffect(()=>{g&&f&&!x&&W()},[g,f,x]),r.useEffect(()=>{x?D():(o(!1),C(!1),c(!1),s(!0))},[x]),r.useEffect(()=>{v&&(o(!1),C(!1),c(!1),s(!0))},[v]),e.jsx("div",{className:"flex justify-center w-full max-h-full min-h-screen tablet:items-center mobile:items-start",children:g?e.jsx(Y,{text:G}):e.jsx(Q,{effect:"slideInRight",className:"tablet:w-[26rem] mobile:w-full mobile:h-full",children:e.jsxs("form",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",onSubmit:I,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx($,{size:40})}),e.jsx("div",{className:"mb-8 text-3xl font-bold text-tertiaryColor",children:"LOGIN"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Email"})}),e.jsx("input",{id:"email",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu email",onInput:t=>A(t.currentTarget.value.toLowerCase()),value:h}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Senha"})}),e.jsx(re,{value:b,setValue:N}),e.jsx(X,{ref:u,siteKey:F,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:V}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:k,children:R?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(J,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsx("span",{children:"Entrar"})}),e.jsxs("button",{className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(L,{to:"/esqueci-minha-senha",children:"Esqueci minha senha"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]}),e.jsx("span",{className:"mt-10 text-tertiaryColor",children:"Ainda nÃ£o possui cadastro?"}),e.jsxs(L,{to:n.requestOrigin==="Chatbot"?"/chatbot/cadastro":"/cadastro",className:"relative font-semibold transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx("span",{children:"Clique aqui!"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between w-full mt-5 text-primaryColor",children:[e.jsx("hr",{className:"w-[42%]"}),e.jsx("span",{className:"font-semibold",children:"Ou"}),e.jsx("hr",{className:"w-[42%]"})]}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center h-14 mt-5 font-bold transition-all duration-300 ease-in-out shadow-lg tablet:text-lg mobile:text-base shadow-tertiaryColor/40 laptop:w-80 mobile:w-72 bg-tertiaryColor text-[#555] rounded-xl hover:scale-110 disabled:cursor-not-allowed disabled:scale-100",onClick:()=>C(!0),children:[e.jsx("img",{src:T.googleLogoWithoutBg.source,alt:T.googleLogoWithoutBg.alternativeText,className:"w-6 mr-4"}),e.jsx("span",{children:"Continuar com Google"})]})]})})})}export{me as Login};

import{r as s,j as e,L as p,a3 as b,ai as j,aj as y,ak as w,al as C,am as N,C as v,X as F,a5 as r}from"./vendor-LjbCKWXj.js";import{u as k,a as A,b as S,A as E}from"./index-DGoysZCb.js";import{M as T}from"./Menu-BrhOyytM.js";import{u as R}from"./useConfirmation-CMxKQYYz.js";function M(){const{authToken:a,authUser:n,logout:m}=k(),{dispatch:x}=R(),{dispatch:i}=A(),c=s.useRef(!1),[u,h]=s.useState(null),[d,o]=s.useState(!1),g=async()=>{if(c.current=!0,a){const t=await S.getContractorByUser(a);h(t)}},f=()=>{o(!0),x({type:"SHOW_CONFIRMATION",payload:{title:"Confirmar cancelamento de cadastro",message:"Tem certeza que deseja cancelar o seu cadastro no FreeLa? Todos os seus dados serão perdidos.",onConfirm:async()=>{if(a&&n){const t=await E.request({origin:"Web",method:"GET",url:`/users/${n.id}/disable`,authToken:a});if(t.success&&t.data)i({type:"SHOW_ALERT",payload:{type:"warning",text:"Seu cadastro foi cancelado, você será desconectado(a) em breve"}}),setTimeout(()=>{o(!1),m()},3e3);else{let l="";t.statusCode!==404?l="Houve um erro inesperado ao cancelar o seu cadastro":l="Houve um erro ao cancelar o seu cadastro",i({type:"SHOW_ALERT",payload:{type:"error",text:l}})}}},onCancel:()=>{o(!1)}}})};return s.useEffect(()=>{c.current||g()},[]),e.jsxs(e.Fragment,{children:[u?e.jsxs("div",{className:"flex flex-col items-start justify-start w-full min-h-screen bg-secondaryColor desktop:px-96 laptop:px-44 tablet:px-20 mobile:px-2 tablet:pb-32 mobile:pb-28",children:[e.jsx("span",{className:"mt-1 mb-8 text-lg font-semibold underline text-tertiaryColor underline-offset-8",children:"Configurações"}),e.jsxs(p,{to:"/contratante/editar-perfil",className:"bg-[#333] text-tertiaryColor hover:bg-primaryColor flex justify-start pl-6 items-center w-full h-12 transition-all duration-300 ease-in-out",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(b,{size:24})}),e.jsx("span",{className:"ml-3 text-lg font-semibold",children:"Editar perfil"})]}),e.jsxs(j,{className:"text-tertiaryColor w-full mt-[2px] transition-all duration-300 ease-in-out",children:[e.jsxs(y,{"aria-controls":"panel1-content",id:"panel1-header",sx:{background:"#333","&:hover":{background:"#FFBF00"},"&.Mui-expanded":{backgroundColor:"#FFBF00"},display:"flex",alignItems:"center",justifyContent:"start",width:"100%",height:"3rem",paddingLeft:"1.5rem"},expandIcon:e.jsx(C,{sx:{color:"#FFFFFF"}}),children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(w,{size:24,className:"text-tertiaryColor"})}),e.jsx("span",{className:"ml-3 text-lg font-semibold text-tertiaryColor",children:"Avançado"})]}),e.jsx(N,{className:"w-full bg-[#333]",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"submit",className:"laptop:w-96 mobile:w-[19rem] flex items-center justify-center h-16 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-errorColor shadow-errorColor/40 text-errorColor hover:text-tertiaryColor rounded-xl hover:bg-errorColor disabled:cursor-not-allowed disabled:bg-errorColor/80 disabled:text-tertiaryColor/80 disabled:border-errorColor/20",disabled:d,onClick:f,children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(v,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Por favor, aguarde..."})]}):e.jsx("span",{children:"Cancelar cadastro"})})})})]})]}):e.jsx("div",{className:"w-full h-screen desktop:px-80 laptop:px-36 tablet:px-24 mobile:px-2 mobile:pt-2 mobile:pb-32 bg-secondaryColor",children:e.jsxs(F,{children:[e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"7.5rem",height:"1rem",className:"mx-auto mt-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"7.5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"3rem",className:"rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"8.5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"3rem",className:"rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"16rem",className:"rounded-md"}),e.jsxs("div",{className:"flex justify-start w-full h-24 laptop:flex-row mobile:flex-col",children:[e.jsxs("div",{className:"flex flex-row desktop:w-[50%] laptop:w-[60%] tablet:w-[60%] mobile:w-full laptop:justify-start mobile:justify-between",children:[e.jsxs("div",{className:"flex flex-col w-[17rem]",children:[e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"7.5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"3rem",className:"rounded-md"})]}),e.jsx("div",{className:"flex items-end justify-center w-10 h-full",children:e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"55%",height:"0.2rem",className:"mb-6 rounded-md"})}),e.jsxs("div",{className:"flex flex-col w-[7.5rem]",children:[e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"7.5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"3rem",className:"rounded-md"})]})]}),e.jsxs("div",{className:"flex flex-col w-full laptop:ml-10",children:[e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"7.5rem",height:"0.6rem",className:"mt-[1.75rem] mb-2 rounded-md"}),e.jsx(r,{sx:{bgcolor:"grey.900"},variant:"rectangular",width:"100%",height:"3rem",className:"rounded-md"})]})]})]})}),e.jsx(T,{profileType:"contractor",pageSelected:"settings"})]})}export{M as ContractorSettings};

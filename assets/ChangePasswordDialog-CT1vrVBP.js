import{r as l,j as a,D as C,d as g,au as j,av as p,e as S,C as P}from"./vendor-LjbCKWXj.js";import{P as y}from"./PasswordInput-BBQbj07p.js";import{P as A}from"./PasswordStatus-DHsdFX9I.js";import{A as v,u as N}from"./index-B8ZXL9Jk.js";class q{static fileToBytes(o){const e=new FileReader;e.readAsArrayBuffer(o);const s=e.result,n=new Uint8Array(s);return Array.from(n)}static async bytesToFile(o,e){const s=new Uint8Array(o),n=new Blob([s]);return new File([n],e,{type:"application/octet-stream"})}}const k=(t,o,e,s=!0)=>{const[n,c]=l.useState(null),[x,i]=l.useState(null),[f,d]=l.useState(!1),[h,m]=l.useState(0);return l.useEffect(()=>{if(!s)return;const u=new AbortController,{signal:b}=u;return(async()=>{d(!0),i(null),c(null);try{const r=await v.request({origin:t,url:o,method:(e==null?void 0:e.method)||"GET",params:e==null?void 0:e.params,data:e==null?void 0:e.body,chatBotToken:e==null?void 0:e.chatBotToken,authToken:e==null?void 0:e.authToken,signal:b});r.success&&r.data?c(r.data):i(r.message),m(r.statusCode)}catch(r){if(r instanceof Error)i(r.name),console.warn("Request aborted");else{const w=r.message;m(500),i(w),console.error("Request failed: ",r)}}finally{d(!1)}})(),()=>{u.abort()}},[t,o,e,s]),{data:n,error:x,loading:f,statusCode:h}};function F({...t}){const{authToken:o}=N(),[e,s]=l.useState(""),[n,c]=l.useState(""),[x,i]=l.useState(!1),[f,d]=l.useState(!1),{data:h,error:m,loading:u}=k("Web","/users/change-password",{method:"PATCH",body:{email:t.user.email,password:e},authToken:o},f),b=()=>{d(!0),setTimeout(()=>{h?(s(""),c(""),t.callbackSuccess()):m&&t.callbackError(),d(!1)},3e3)};return a.jsx(a.Fragment,{children:a.jsxs(C,{onClose:t.onClose,open:t.open,PaperProps:{sx:{margin:"0",width:"95%"}},disableScrollLock:!0,children:[a.jsx(g,{className:"w-full text-xl font-bold text-center text-tertiaryColor bg-gradient-to-b from-primaryColor to-quaternaryColor",children:"Alterar Senha"}),a.jsx(j,{edge:"end",onClick:t.onClose,"aria-label":"close",sx:{position:"absolute",top:"12px",right:"20px"},children:a.jsx(p,{})}),a.jsx(S,{className:"bg-[#222]",children:a.jsxs("div",{className:"flex flex-col w-full laptop:px-10 tablet:px-6 mobile:px-0",children:[a.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:a.jsx("span",{className:"text-tertiaryColor text-start",children:"Senha"})}),a.jsx(y,{value:e,setValue:s}),a.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:a.jsx("span",{className:"text-tertiaryColor text-start",children:"Repetir Senha"})}),a.jsx(y,{value:n,setValue:c}),a.jsx(A,{password:e,repeatPassword:n,onPasswordValidChange:i}),a.jsx("button",{type:"button",className:"flex items-center justify-center h-12 mx-auto mt-8 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:w-full mobile:text-base border-primaryColor shadow-primaryColor/40 text-primaryColor hover:text-tertiaryColor rounded-xl hover:bg-primaryColor disabled:cursor-not-allowed disabled:bg-primaryColor/80 disabled:text-tertiaryColor/80 disabled:border-primaryColor/20",disabled:!x||u,onClick:b,children:u?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(P,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),a.jsx("span",{children:"Salvando..."})]}):a.jsx("span",{children:"Salvar"})})]})})]})})}export{F as C,q as F};

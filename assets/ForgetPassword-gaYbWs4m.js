import{l as z,r as o,j as e,H as p,C as h,L as y}from"./vendor-LjbCKWXj.js";import{A as B}from"./index-CUf8Fghe.js";import{C as U}from"./CustomReCAPTCHA-TudvVxJY.js";import{u as $,a as G,A as C}from"./index-BpyeDjJi.js";import{P as T}from"./PasswordInput-BBQbj07p.js";import{P as K}from"./PasswordStatus-DHsdFX9I.js";function ee(){const{logout:O}=$(),{dispatch:a}=G(),q=z(),[m,i]=o.useState(!1),[f,l]=o.useState(!0),[s,g]=o.useState(""),[b,v]=o.useState(""),[x,j]=o.useState(""),[w,N]=o.useState(""),[A,L]=o.useState(!1),[S,E]=o.useState(!1),[R,P]=o.useState(!1),H=o.useRef(null),[n,V]=o.useState(!1),W="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",k=t=>{t.preventDefault(),i(!0),l(!0),setTimeout(async()=>{if(d()){const r=await C.request({origin:"Web",method:"GET",url:"/users/generate-email-confirmation-code",params:{email:s,blockRegistered:!1}});r.success&&r.data?E(!0):a({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao gerar o código de confirmação de email"}})}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},_=t=>{t.preventDefault(),i(!0),l(!0),setTimeout(async()=>{if(d()){const r={code:b,email:s,date:new Date},c=await C.request({origin:"Web",method:"POST",url:"/users/confirm-email",data:r});if(c.success&&c.data)P(!0),a({type:"SHOW_ALERT",payload:{type:"success",text:"Código de confirmação de email verificado com sucesso"}});else{let u="";c.statusCode!==404?c.statusCode===401?u="Código de verificação incorreto":u="Houve um erro inesperado ao verificar o código de confirmação de email":u="Houve um erro ao verificar o código de confirmação de email",a({type:"SHOW_ALERT",payload:{type:"error",text:u}})}}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},D=()=>{i(!0),l(!0),setTimeout(async()=>{if(d()){const t={email:s,password:x},r=await C.request({origin:"Web",method:"PATCH",url:"/users/change-password",data:t});r.success&&r.data?(a({type:"SHOW_ALERT",payload:{type:"success",text:"Sua senha foi alterada com sucesso"}}),setTimeout(()=>{q("/login")},6e3)):a({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao alterar sua senha"}})}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},d=()=>S?R?!!(A&&n):!!(b.length>0&&n):!!(F()&&n),F=()=>{const t=s.substring(0,s.indexOf("@")),r=s.substring(s.indexOf("@")+1,s.length);return t.length>=1&&r.length>=3&&t.search("@")==-1&&r.search("@")==-1&&t.search(" ")==-1&&r.search(" ")==-1&&r.search(".")!=-1&&r.indexOf(".")>=1&&r.lastIndexOf(".")<r.length-1},I=t=>{V(t)};return o.useEffect(()=>{l(!d())},[s,b,A,n]),o.useEffect(()=>{var t;O(),(t=H.current)==null||t.resetReCAPTCHA(),i(!1),l(!0),g(""),v(""),j(""),N(""),E(!1),P(!1)},[]),e.jsx("div",{className:"flex justify-center w-full max-h-full min-h-screen tablet:items-center mobile:items-start",children:S?R?e.jsx("div",{className:"tablet:w-[26rem] mobile:w-full tablet:h-full mobile:h-screen",children:e.jsxs("div",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(p,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nova senha"})}),e.jsx(T,{value:x,setValue:j},1),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Repetir nova senha"})}),e.jsx(T,{value:w,setValue:N},2),e.jsx(K,{password:x,repeatPassword:w,onPasswordValidChange:L}),e.jsx("button",{type:"button",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:f,onClick:D,children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(h,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:"Salvar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(y,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]})}):e.jsx("div",{className:"tablet:w-[26rem] mobile:w-full tablet:h-full mobile:h-screen",children:e.jsxs("form",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",onSubmit:_,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(p,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Código de verificação"})}),e.jsx("input",{id:"verifyCode",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o código de verificação",onInput:t=>v(t.currentTarget.value)}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:f,children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(h,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Confirmando..."})]}):e.jsx("span",{children:"Confirmar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(y,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]})}):e.jsx(B,{effect:"slideInRight",className:"tablet:w-[26rem] mobile:w-full mobile:h-full",children:e.jsxs("form",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",onSubmit:k,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(p,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Email"})}),e.jsx("input",{id:"email",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu email",onInput:t=>g(t.currentTarget.value.toLowerCase())}),e.jsx(U,{ref:H,siteKey:W,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:I}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:f,children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(h,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Enviando..."})]}):e.jsx("span",{children:"Enviar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(y,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]})})})}export{ee as ForgetPassword};

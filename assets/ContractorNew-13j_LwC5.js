import{l as _e,r as t,j as e,a1 as qe,a2 as Ke,p as R}from"./vendor-LjbCKWXj.js";import{u as Qe,a as Ze,A as Xe}from"./index-B-GzxfbT.js";import{C as Ye}from"./CustomReCAPTCHA-TudvVxJY.js";import{G as er}from"./geolocationService-Br-_cx1P.js";import{S as fe,a as pe,C as xe}from"./Select-C8PQA4vz.js";import{L as rr}from"./Loading-Cd5r56ie.js";import{S as tr}from"./SuccessFullScreen-Bq3ZACd6.js";import{U as or}from"./UploadImage-BKCnoKBd.js";import{S as Ce,a as ar,C as sr}from"./cnpjService-Bgp3VAaR.js";import{C as lr}from"./Checkbox-BaNogSK9.js";import"./successAnimation-C1ByJTMN.js";function br(){const{authToken:F,authUser:c,chatBotToken:M,setContractorProfile:ye}=Qe(),{dispatch:P}=Ze(),T=_e(),[y,U]=t.useState(""),[b,be]=t.useState(""),[w,V]=t.useState(""),[h,he]=t.useState(""),[g,ge]=t.useState(""),[v,W]=t.useState(""),[j,J]=t.useState(""),[E,D]=t.useState(""),[N,$]=t.useState(""),[I,G]=t.useState(""),[m,_]=t.useState(""),[f,q]=t.useState(""),[K,Q]=t.useState(""),[Z,X]=t.useState(""),[Y,ee]=t.useState(""),[re,te]=t.useState(""),[S,B]=t.useState(""),[p,ve]=t.useState(1),[x,je]=t.useState(1),[O,Ne]=t.useState(!1),[d,we]=t.useState(null),[L,Se]=t.useState(!1),[l,k]=t.useState(1),[oe,ae]=t.useState(!1),[se,le]=t.useState(!1),[H,u]=t.useState(!1),[o,C]=t.useState(!1),[ke,ie]=t.useState(!1),ne=t.useRef(null),ce=t.useRef(l),Ae=async()=>{l===4?await Te():k(l+1)},Pe=()=>{l===1?T("/perfil"):k(l-1)},Te=async()=>{if(C(!0),F&&c){let r={cnpj:y,corporateReason:b,companySegment:w,phoneNumber:c.phoneNumber,landline:"(00) 0000-0000",nameOperationResponsible:h,phoneOperationResponsible:g,cep:v,street:j,complement:E,neighborhood:N,number:I,city:m,uf:f,ibge:K,gia:Z,ddd:Y,siafi:re,vacancies:S,numberFixedEmployees:p,numberWeeklyHires:x,providerSpeakAnotherLanguage:O,profileImage:d,feedbackStars:0,createdAt:new Date,userId:c==null?void 0:c.id};M&&(r={chatBotToken:M,...r});const s=new FormData;for(const[i,n]of Object.entries(r))if(n!==null)if(i==="profileImage"&&d){const A=await d.arrayBuffer(),Ge=new Blob([A],{type:d.type});s.append(i,Ge,d.name)}else s.append(i,n.toString());const a=await Xe.request({origin:"Web",method:"POST",url:"/contractors",data:s,headers:{"Content-Type":"multipart/form-data"},authToken:F});if(a.success&&a.data)C(!1),ie(!0),setTimeout(()=>{ye(!0),T("/contratante/inicio"),ie(!1)},4200);else{let i="";a.statusCode!==404?a.statusCode===409?(i="O CNPJ já está associado à um cadastro",k(1)):a.statusCode===422?(i="O cartão de crédito não é válido",k(5)):i="Houve um erro inesperado ao criar o perfil contratante":i="Houve um erro ao criar o perfil contratante",P({type:"SHOW_ALERT",payload:{type:"error",text:i}}),C(!1)}}},Re="files/useTerms.pdf",Ee=async()=>{var r;try{const a=await(await fetch(Re)).blob(),i=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.href=i,n.setAttribute("download","useTerms.pdf"),document.body.appendChild(n),n.click(),(r=n.parentNode)==null||r.removeChild(n)}catch(s){console.error("Error downloading termos of use pdf: ",s),P({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao baixar os termos de uso"}})}},De=t.useRef(null),[de,Ie]=t.useState(!1),Be="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",Oe=r=>{Ie(r)},[Le,ue]=t.useState("(00) 0000-00000"),He=r=>{ge(r.target.value),r.target.value&&(r.target.value.replace(/\D/g,"").length===11?ue("(00) 00000-0000"):ue("(00) 0000-00000"))},[ze,me]=t.useState(),[Fe,z]=t.useState([]),Me=(r,s)=>{s&&(s.action==="clear"?(me(void 0),V("")):r&&"value"in r&&(me(r),V(r.value)))},Ue=(r,s)=>{if(s)if(s.action==="clear")z([]),B("");else{const a=Array.isArray(r)?r:[];if(a.length>0){z(a);const n=a.map(A=>A==null?void 0:A.value).join(", ");B(n)}else z([]),B("")}},Ve=async r=>{if(W(r.target.value),r.target.value&&r.target.value.length===9){C(!0);const s=r.target.value.replace(/-/g,""),a=await er.getAddressByCep(s);a?(_(a.city),q(a.uf),$(a.neighborhood),J(a.street),D(a.complement),Q(a.ibge),X(a.gia),ee(a.ddd),te(a.siafi)):(W(""),_(""),q(""),$(""),J(""),D(""),Q(""),X(""),ee(""),te(""),G(""),P({type:"SHOW_ALERT",payload:{type:"error",text:"CEP não encontrado"}})),setTimeout(()=>{C(!1)},3e3)}},We=async r=>{U(r.target.value),r.target.value&&r.target.value.length===18&&(C(!0),await sr.check(r.target.value)||(P({type:"SHOW_ALERT",payload:{type:"error",text:"CNPJ inválido"}}),U("")),setTimeout(()=>{C(!1)},3e3))},Je=()=>{switch(l){case 1:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"CNPJ*"})}),e.jsx(R,{mask:"00.000.000/0000-00",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu CNPJ",onInput:We,value:y,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Razão Social*"})}),e.jsx("input",{id:"corporateReason",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite a razão social da empresa",onInput:r=>be(r.currentTarget.value),value:b,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Segmento da Empresa*"})}),e.jsx(fe,{placeholder:"Selecione",isSearchable:!1,name:"companySegment",options:xe.getCompanySegmentCombo(),styles:pe.getCustomStyles(),noOptionsMessage:()=>"Nenhum resultado encontrado",onChange:Me,value:ze,isDisabled:o},1),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Número de Telefone*"})}),e.jsx(R,{mask:"(00) 00000-0000",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor/50 bg-secondaryColor border-tertiaryColor/50 placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu número de telefone",value:c==null?void 0:c.phoneNumber,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nome do responsável da operação"})}),e.jsx("input",{id:"nameOperationResponsible",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o nome do responsável da operação",onInput:r=>he(r.currentTarget.value),value:h,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Telefone do responsável da operação*"})}),e.jsx(R,{mask:Le,type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o telefone do responsável da operação",onInput:He,value:g,disabled:o})]});case 2:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"font-bold text-primaryColor text-start",children:"Digite as informações da sua empresa!"})}),e.jsx("div",{className:"flex justify-start w-full mt-2 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"CEP*"})}),e.jsx(R,{mask:"00000-000",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu CEP",onInput:Ve,value:v,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Cidade*"})}),e.jsx("input",{id:"city",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:m&&f?m+" - "+f:"",disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Bairro*"})}),e.jsx("input",{id:"neighborhood",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:N,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Endereço*"})}),e.jsx("input",{id:"street",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:j,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Complemento"})}),e.jsx("input",{id:"complement",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:E,onInput:r=>D(r.currentTarget.value),disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número"})}),e.jsx("input",{id:"number",placeholder:"Digite o número da sua empresa/negócio",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",value:I,onInput:r=>G(r.currentTarget.value),disabled:o})]});case 3:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Quais vagas deseja contratar?"})}),e.jsx(fe,{isMulti:!0,placeholder:"Selecione",isSearchable:!1,name:"vacancy",options:xe.getVacancyCombo(),styles:pe.getCustomStyles(),noOptionsMessage:()=>"Nenhum resultado encontrado",value:Fe,onChange:Ue,closeMenuOnSelect:!1,isDisabled:o},2),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número de funcionários fixos*"})}),e.jsx(Ce,{value:p,setValue:ve,disabled:o},3),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número de contratações semanais*"})}),e.jsx(Ce,{value:x,setValue:je,disabled:o},4),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Freelancer falará outro idioma?*"})}),e.jsx(ar,{checked:O,onChange:r=>{Ne(r.target.checked)},disabled:o})]});case 4:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Imagem de perfil"})}),e.jsx(or,{value:d,setValue:r=>{r&&we(r)},disabled:o}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(Ye,{ref:De,siteKey:Be,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:Oe})}),e.jsx("span",{className:"mt-10 text-base text-primaryColor",children:"Para continuar você deve aceitar os termos de uso do App:"}),e.jsxs("div",{className:"flex flex-row items-start justify-start w-full mt-2",children:[e.jsx(lr,{checked:L,onChange:Se,disabled:o}),e.jsxs("button",{type:"button",onClick:Ee,className:"mt-3 ml-2 text-sm text-left text-tertiaryColor",disabled:o,children:[e.jsx("span",{children:"Declaro que concordo e aceito os "}),e.jsx("span",{className:"underline transition-colors duration-300 hover:text-primaryColor",children:"Termos de Uso e Políticas de Privacidade"})]})]})]});default:return null}},$e=()=>{switch(l){case 1:return"Informações cadastrais";case 2:return"Informações de localidade";case 3:return"Informações profissionais";case 4:return"Identificação visual";default:return null}};return t.useEffect(()=>{ce.current=l,window.history.pushState({page:l},""),requestAnimationFrame(()=>{var r;(r=ne.current)==null||r.scrollTo({top:0,behavior:"smooth"})})},[l]),t.useEffect(()=>{const r=()=>{ce.current>1?k(s=>s-1):T("/perfil")};return window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}},[T]),t.useEffect(()=>{switch(l){case 1:!o&&(y==null?void 0:y.length)===18&&(b==null?void 0:b.length)>0&&(w==null?void 0:w.length)>0&&(h==null?void 0:h.length)>0&&(g==null?void 0:g.length)>=14?u(!1):u(!0);break;case 2:!o&&(v==null?void 0:v.length)===9&&(m==null?void 0:m.length)>0&&(f==null?void 0:f.length)>0&&(N==null?void 0:N.length)>0&&(j==null?void 0:j.length)>0?u(!1):u(!0);break;case 3:!o&&(S==null?void 0:S.length)>0&&p&&(p==null?void 0:p.toString().length)>0&&x&&(x==null?void 0:x.toString().length)>0?u(!1):u(!0);break;case 4:u(!(!o&&d&&de&&L));break;default:throw new Error("Current page value was not predicted")}},[l,o,y,b,w,h,g,v,j,E,N,I,m,f,K,Z,Y,re,S,p,x,O,d,de,L]),e.jsx(e.Fragment,{children:ke?e.jsx(tr,{text:"Cadastro concluído com sucesso"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center w-full h-full overflow-x-hidden bg-secondaryColor",children:e.jsxs("form",{ref:ne,className:"relative flex flex-col items-center justify-start mx-auto bg-gradient-to-b w-[26rem] h-screen tablet:px-8 mobile:px-2 py-8 rounded-3xl",children:[e.jsx("div",{className:"fixed top-0 z-10 flex flex-col w-full px-10 py-4 bg-primaryColor",children:e.jsx("span",{className:"text-lg font-bold text-center text-tertiaryColor",children:$e()})}),e.jsx("div",{className:"relative flex flex-col w-full h-auto px-10 pt-20 pb-32",children:Je()}),e.jsxs("div",{className:"fixed bottom-0 z-10 flex items-center justify-between w-full px-6 py-3 bg-primaryColor",children:[e.jsxs("button",{type:"button",className:"flex flex-col items-center w-16",onMouseEnter:()=>ae(!0),onMouseLeave:()=>ae(!1),onClick:Pe,disabled:o,children:[e.jsx(qe,{size:42,className:`transition-transform duration-500 ${oe?"scale-110 text-secondaryColor":"scale-100 text-tertiaryColor"}`}),e.jsx("span",{className:`mt-3 transition-transform duration-1000 ${oe?"text-secondaryColor":"text-tertiaryColor"}`,children:"Voltar"})]}),e.jsxs("button",{type:"button",className:"flex flex-col items-center",onMouseEnter:()=>le(!0),onMouseLeave:()=>le(!1),onClick:Ae,disabled:H||o,children:[e.jsx(Ke,{size:42,className:`transition-transform duration-500 
                                            ${H?"scale-110 text-tertiaryColor/50":`${se?"scale-110 text-secondaryColor":"scale-100 text-tertiaryColor"}`}
                                        `}),e.jsx("span",{className:`mt-3 transition-transform duration-1000
                                            ${H?"text-tertiaryColor/50":`${se?"text-secondaryColor":"text-tertiaryColor"}`}
                                        `,children:l===4?"Finalizar":"Próximo"})]})]})]})}),o&&e.jsx(rr,{})]})})}export{br as ContractorNew};

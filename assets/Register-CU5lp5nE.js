import{l as fe,n as xe,r,j as e,C as W,H as be,p as pe,L as Ce}from"./vendor-LjbCKWXj.js";import{A as he}from"./index-CUf8Fghe.js";import{C as ge}from"./CustomReCAPTCHA-TudvVxJY.js";import{u as ye,a as ve,b as m,A as D}from"./index-BpyeDjJi.js";import{S as G}from"./SuccessFullScreen-Bq3ZACd6.js";import{P as U}from"./PasswordInput-BBQbj07p.js";import{P as je}from"./PasswordStatus-DHsdFX9I.js";import{S as F}from"./images-Bf77nNy9.js";import"./successAnimation-C1ByJTMN.js";function qe({...f}){const{authToken:x,authAdmin:w,setContractorProfile:N,setProviderProfile:S,authUser:b,connectedWithGoogle:p,errorConnectWithGoogle:A,authenticate:P,logout:V}=ye(),{dispatch:d}=ve(),a=fe(),_=xe(),R=new URLSearchParams(_.search).get("token"),[C,z]=r.useState(""),[n,M]=r.useState(""),[h,J]=r.useState(""),[j,K]=r.useState(""),[T,Z]=r.useState(""),[H,$]=r.useState(!1),[Q,c]=r.useState(!1),[u,i]=r.useState(!1),[X,l]=r.useState(!0),[E,g]=r.useState(!1),[k,Y]=r.useState(""),[ee,q]=r.useState(!1),[te,O]=r.useState(!1),[re,y]=r.useState(!0),[L,B]=r.useState(""),v=r.useRef(null),[oe,se]=r.useState(!1),ae="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",le=async t=>{t.preventDefault(),E?ce():(c(!0),l(!0),setTimeout(async()=>{if(I()){const o=await D.request({origin:"Web",method:"GET",url:"/users/generate-email-confirmation-code",params:{email:n,blockRegistered:!1}});if(o.success&&o.data)q(!0),d({type:"SHOW_ALERT",payload:{type:"info",text:"O código de confirmação foi gerado, verifique o lixo eletrônico do seu email"}});else{let s="";o.statusCode!==404?o.statusCode===409?s="O Email usado já está associado à um cadastrado":s="Houve um erro inesperado ao gerar o código de confirmação":s="Houve um erro ao gerar o código de confirmação",d({type:"SHOW_ALERT",payload:{type:"error",text:s}})}}else d({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});c(!1),l(!1)},3e3))},ie=()=>{O(!0),y(!0),setTimeout(async()=>{const t={code:k,email:n,date:new Date},o=await D.request({origin:"Web",method:"POST",url:"/users/confirm-email",data:t});if(o.success&&o.data)await ne();else{let s="";o.statusCode!==404?o.statusCode===401?s="Código de confirmação de email incorreto ao verificar o código de confirmação":s="Houve um erro inesperado ao verificar o código de confirmação":s="Houve um erro ao verificar o código de confirmação",d({type:"SHOW_ALERT",payload:{type:"error",text:s}})}O(!1),y(!1)},4e3)},ne=async()=>{const t={name:C,email:n,phoneNumber:h,status:"active",password:j},o=await P(f.requestOrigin,"Server","User",t,f.requestOrigin==="Chatbot"?R:void 0);o.success?(i(!0),B("")):(d({type:"SHOW_ALERT",payload:{type:"error",text:o.message}}),c(!1),l(!1))},ce=async()=>{c(!0),l(!0),await P(f.requestOrigin,"Google","User",void 0,f.requestOrigin==="Chatbot"?R:void 0)},de=()=>{u&&setTimeout(async()=>{var t;if((t=v.current)==null||t.resetReCAPTCHA(),b){const o=await m.currentUserHaveContractorProfile(x),s=await m.currentUserHaveProviderProfile(x);o?(N(!0),a("/contratante/inicio")):s?(S(!0),a("/freelancer/inicio")):a("/perfil")}else w&&a("/admin");i(!1)},4200)},ue=()=>{E&&(i(!0),B("Conectado(a) com Google"),g(!1),setTimeout(async()=>{var t;if((t=v.current)==null||t.resetReCAPTCHA(),b){const o=await m.currentUserHaveContractorProfile(x),s=await m.currentUserHaveProviderProfile(x);o?(N(!0),a("/contratante/inicio")):s?(S(!0),a("/freelancer/inicio")):a("/perfil")}else w&&a("/admin");i(!1)},4200))},I=()=>{var t;return!(C.length===0||!m.verifyEmail(n)||h.length<15||!H||!((t=v.current)!=null&&t.reCAPTCHAFilled))},me=t=>{se(t)};return r.useEffect(()=>{q(!1),y(!0),i(!1),l(!0),V()},[]),r.useEffect(()=>{l(!I())},[C,n,h,H,oe]),r.useEffect(()=>{u&&b&&!p&&de()},[u,b,p]),r.useEffect(()=>{p?ue():(i(!1),g(!1),c(!1),l(!0))},[p]),r.useEffect(()=>{A&&(i(!1),g(!1),c(!1),l(!0))},[A]),e.jsx("div",{className:"flex justify-center w-full max-h-full min-h-screen tablet:items-center mobile:items-start",children:ee?u?e.jsx(G,{text:L}):e.jsx("div",{className:"tablet:w-[26rem] mobile:w-full mobile:h-full",children:e.jsxs("form",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:[e.jsx("div",{className:"flex justify-start w-full mb-3",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Digite o código de verificação enviado ao seu email para confirma-lo:"})}),e.jsx("input",{id:"emailConfirmationCode",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o código de verificação",onInput:t=>{Y(t.currentTarget.value),t.currentTarget.value.length>0&&y(!1)},value:k}),e.jsx("button",{type:"button",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:re,onClick:ie,children:te?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(W,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsx("span",{children:"Confirmar email"})})]})}):u?e.jsx(G,{text:L}):e.jsx(he,{effect:"slideInRight",className:"tablet:w-[26rem] mobile:w-full tablet:h-full mobile:h-full",children:e.jsxs("form",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] w-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",onSubmit:le,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(be,{size:40})}),e.jsx("div",{className:"text-3xl font-bold tablet:mb-8 mobile:mb-6 text-tertiaryColor",children:"CADASTRO"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nome"})}),e.jsx("input",{id:"username",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu nome completo",onInput:t=>z(t.currentTarget.value),value:C}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Email"})}),e.jsx("input",{id:"email",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu email",onInput:t=>M(t.currentTarget.value.toLowerCase()),value:n}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Celular"})}),e.jsx(pe,{mask:"(00) 00000-0000",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu número de telefone",onInput:t=>{J(t.target.value)},value:h}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Senha"})}),e.jsx(U,{value:j,setValue:K},1),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Repetir Senha"})}),e.jsx(U,{value:T,setValue:Z},2),e.jsx(je,{password:j,repeatPassword:T,onPasswordValidChange:$}),e.jsx(ge,{ref:v,siteKey:ae,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:me}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:X,children:Q?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(W,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsx("span",{children:"Cadastrar"})}),e.jsx("span",{className:"mt-10 text-tertiaryColor",children:"Já possui cadastro?"}),e.jsxs(Ce,{to:"/login",className:"relative font-semibold transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx("span",{children:"Clique aqui!"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between w-full mt-5 text-primaryColor",children:[e.jsx("hr",{className:"w-[42%]"}),e.jsx("span",{className:"font-semibold",children:"Ou"}),e.jsx("hr",{className:"w-[42%]"})]}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center h-14 mt-5 font-bold transition-all duration-300 ease-in-out shadow-lg tablet:text-lg mobile:text-base shadow-tertiaryColor/40 laptop:w-80 mobile:w-72 bg-tertiaryColor text-[#555] rounded-xl hover:scale-110 disabled:cursor-not-allowed disabled:scale-100",onClick:()=>g(!0),children:[e.jsx("img",{src:F.googleLogoWithoutBg.source,alt:F.googleLogoWithoutBg.alternativeText,className:"w-6 mr-4"}),e.jsx("span",{children:"Cadastrar com Google"})]})]})})})}export{qe as Register};
